{% load i18n %}
{% if SEARCH_FILTERS.CATEGORIES_ENABLED %}
<div class="accordion-item" ng-cloak>
  <h2 class="accordion-header" id="panelsStayOpen-headingCategory">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseCategory" aria-expanded="false" aria-controls="panelsStayOpen-collapseCategory">
      {% trans "Categories" %}
    </button>
  </h2>

  <div id="panelsStayOpen-collapseCategory" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingCategory">
    <div class="accordion-body">
        <ul class="filter-list">
          {% if facet_type == 'layers' %}
            {% verbatim %}
              <li ng-repeat="category in categories" ng-if="category.layers_count > 0">
                <a data-value="{{ category.identifier }}" data-filter="category__identifier__in" title="{{ category.gn_description }}"
                 ng-click="multiple_choice_listener($event)" class="{{category.active}}"><div class="fa-stack fa-1g"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa {{category.fa_class}} fa-stack-1x"></i></div>{{ category.gn_description | limitTo: 20 }}{{ category.gn_description.length > 20 ? '...' : ''}}
                  <span class="badge pull-right">{{ category.layers_count }}</span>
                </a>
              </li>
            {% endverbatim %}
          {% else %}
            {% verbatim %}
              <li ng-repeat="category in categories" ng-if="category.count > 0">
                <a data-value="{{ category.identifier }}" data-filter="category__identifier__in" title="{{ category.gn_description }}"
                 ng-click="multiple_choice_listener($event)" class="{{category.active}}"><div class="fa-stack fa-1g"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa {{category.fa_class}} fa-stack-1x"></i></div>{{ category.gn_description | limitTo: 20 }}{{ category.gn_description.length > 20 ? '...' : ''}}
                  <span class="badge pull-right">{{ category.count }}</span>
                </a>
              </li>
            {% endverbatim %}
          {% endif %}

        </ul>
    </div>
  </div>

</div>
{% endif %}
{% if SEARCH_FILTERS.OWNERS_ENABLED %}

<div class="accordion-item" ng-cloak>
  <h2 class="accordion-header" id="panelsStayOpen-headingResponsibles">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseResponsibles" aria-expanded="false" aria-controls="panelsStayOpen-collapseResponsibles">
      {% trans "Responsibles" %}
    </button>
  </h2>

  <div id="panelsStayOpen-collapseResponsibles" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingResponsibles">
    <div class="accordion-body">
        <ul class="filter-list">
          {% verbatim %}
          <li ng-repeat="owner in owners" ng-if="owner.count > 0">
            <a data-value="{{ owner.username }}" data-filter="owner__username__in" ng-click="multiple_choice_listener($event)" class="{{owner.active}}">{{ owner.username }}
              <span class="badge pull-right">{{ owner.count }}</span>
            </a>
          </li>
          {% endverbatim %}

        </ul>
    </div>
  </div>


</div>
{% endif %}
{% if SEARCH_FILTERS.GROUPS_ENABLED %}
    <div class="accordion-item" ng-cloak>
      <h2 class="accordion-header" id="panelsStayOpen-headingGroups">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseGroups" aria-expanded="false" aria-controls="panelsStayOpen-collapseGroups">
          {% trans "Groups" %}
        </button>
      </h2>

      <div id="panelsStayOpen-collapseGroups" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingGroups">
        <div class="accordion-body">
            <ul class="filter-list">
              {% if facet_type == 'layers' %}
                  {% verbatim %}
                  <li ng-repeat="group in groups" ng-if="group.resource_counts.layer.total > 0">
                      <a data-value="{{ group.name }}" data-filter="group__group_profile__slug__in" ng-click="multiple_choice_listener($event)" class="{{group.active}}">{{ group.group_profile.title }}
                          <span class="badge pull-right">{{ group.resource_counts.layer.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% elif facet_type == 'documents' %}
                  {% verbatim %}
                  <li ng-repeat="group in groups" ng-if="group.resource_counts.document.total > 0">
                      <a data-value="{{ group.name }}" data-filter="group__group_profile__slug__in" ng-click="multiple_choice_listener($event)" class="{{group.active}}">{{ group.group_profile.title }}
                          <span class="badge pull-right">{{ group.resource_counts.document.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% elif facet_type == 'maps' %}
                  {% verbatim %}
                  <li ng-repeat="group in groups" ng-if="group.resource_counts.map.total > 0">
                      <a data-value="{{ group.name }}" data-filter="group__group_profile__slug__in" ng-click="multiple_choice_listener($event)" class="{{group.active}}">{{ group.group_profile.title }}
                          <span class="badge pull-right">{{ group.resource_counts.map.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% elif facet_type == 'geoapps' %}
                  {% verbatim %}
                  <li ng-repeat="group in groups" ng-if="group.resource_counts.geoapp.total > 0">
                      <a data-value="{{ group.name }}" data-filter="group__group_profile__slug__in" ng-click="multiple_choice_listener($event)" class="{{group.active}}">{{ group.group_profile.title }}
                          <span class="badge pull-right">{{ group.resource_counts.geoapp.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% endif %}

            </ul>
        </div>
      </div>


    </div>
{% endif %}
{% if SEARCH_FILTERS.GROUP_CATEGORIES_ENABLED %}

    <div class="accordion-item" ng-cloak>
      <h2 class="accordion-header" id="panelsStayOpen-headingGroupCategories">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseGroupCategories" aria-expanded="false" aria-controls="panelsStayOpen-collapseGroupCategories">
          {% trans "Group Categories" %}
        </button>
      </h2>

      <div id="panelsStayOpen-collapseGroupCategories" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingGroupCategories">
        <div class="accordion-body">
            <ul class="filter-list">
              {% if facet_type == 'layers' %}
                  {% verbatim %}
                  <li ng-repeat="groupCategory in groupCategories" ng-if="groupCategory.resource_counts.layer.total > 0">
                      <a data-value="{{ groupCategory.slug }}" data-filter="group__group_profile__categories__slug__in" ng-click="multiple_choice_listener($event)" class="{{groupCategory.active}}">{{ groupCategory.name }}
                          <span class="badge pull-right">{{ groupCategory.resource_counts.layer.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% elif facet_type == 'documents' %}
                  {% verbatim %}
                  <li ng-repeat="groupCategory in groupCategories" ng-if="groupCategory.resource_counts.document.total > 0">
                      <a data-value="{{ groupCategory.slug }}" data-filter="group__group_profile__categories__slug__in" ng-click="multiple_choice_listener($event)" class="{{groupCategory.active}}">{{ groupCategory.name }}
                          <span class="badge pull-right">{{ groupCategory.resource_counts.document.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% elif facet_type == 'maps' %}
                  {% verbatim %}
                  <li ng-repeat="groupCategory in groupCategories" ng-if="groupCategory.resource_counts.map.total > 0">
                      <a data-value="{{ groupCategory.slug }}" data-filter="group__group_profile__categories__slug__in" ng-click="multiple_choice_listener($event)" class="{{groupCategory.active}}">{{ groupCategory.name }}
                          <span class="badge pull-right">{{ groupCategory.resource_counts.map.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% elif facet_type == 'geoapps' %}
                  {% verbatim %}
                  <li ng-repeat="groupCategory in groupCategories" ng-if="groupCategory.resource_counts.geoapp.total > 0">
                      <a data-value="{{ groupCategory.slug }}" data-filter="group__group_profile__categories__slug__in" ng-click="multiple_choice_listener($event)" class="{{groupCategory.active}}">{{ groupCategory.name }}
                          <span class="badge pull-right">{{ groupCategory.resource_counts.geoapp.total }}</span>
                      </a>
                  </li>
                  {% endverbatim %}
              {% endif %}

            </ul>
        </div>
      </div>


    </div>
{% endif %}
{% if SEARCH_FILTERS.DATE_ENABLED %}

<div class="accordion-item" ng-cloak>
  <h2 class="accordion-header" id="panelsStayOpen-headingDate">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseDate" aria-expanded="false" aria-controls="panelsStayOpen-collapseDate">
      {% trans "Date" %}
    </button>
  </h2>

  <div id="panelsStayOpen-collapseDate" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingDate">
    <div class="accordion-body">
          <div class="filter-date" id="date_start">
            <label>{% trans "Date begins after:" %}</label>
            <li><input value="yyyy-mm-dd" data-date-format="YYYY-MM-DD" type="text" class="datepicker" placeholder="{% trans 'yyyy-mm-dd' %}" ng-model="date_query.date__gte" /></li>
          </div>
          <div class="filter-date" id="date_end">
            <label>{% trans "Date ends before:" %}</label>
            <li><input value="yyyy-mm-dd" data-date-format="YYYY-MM-DD" type="text" class="datepicker" placeholder="{% trans 'yyyy-mm-dd' %}" ng-model="date_query.date__lte" /></li>
          </div>

    </div>
  </div>

</div>
{% endif %}
